<!--
=========================================================
* Material Kit 2 - v3.0.4
=========================================================

* Product Page:  https://www.creative-tim.com/product/material-kit 
* Copyright 2023 Creative Tim (https://www.creative-tim.com)
* Coded by www.creative-tim.com

 =========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->
<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../assets/img/favicon.png">
  <title>
    Material Kit 2 by Creative Tim
  </title>
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css"
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />
  <!-- Nucleo Icons -->
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <!-- CSS Files -->
  <link id="pagestyle" href="../assets/css/material-kit.css?v=3.0.4" rel="stylesheet" />
  <!-- Nepcha Analytics (nepcha.com) -->
  <!-- Nepcha is a easy-to-use web analytics. No cookies and fully compliant with GDPR, CCPA and PECR. -->
  <script defer data-site="YOUR_DOMAIN_HERE" src="https://api.nepcha.com/js/nepcha-analytics.js"></script>
</head>

<body class="about-us bg-gray-200">
  <!-- Navbar Transparent -->
 <div th:insert="~{fragments/navbar.html :: navbar}">
 </div>
  <!-- End Navbar -->
  <!-- -------- START HEADER 7 w/ text and video ------- -->
  <header class="bg-gradient-dark">
    <div class="page-header min-vh-75" style="background-image: url('../assets/img/bg9.jpg');">
      <span class="mask bg-gradient-dark opacity-6"></span>
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-8 text-center mx-auto my-auto">
            <h1 class="text-white">Work with an amazing design</h1>
            <p class="lead mb-4 text-white opacity-8">We’re constantly trying to express ourselves and actualize our
              dreams. If you have the opportunity to play this game</p>
            <button type="submit" class="btn bg-white text-dark">Create Account</button>
            <h6 class="text-white mb-2 mt-5">Find us on</h6>
            <div class="d-flex justify-content-center">
              <a href="javascript:;"><i class="fab fa-facebook text-lg text-white me-4"></i></a>
              <a href="javascript:;"><i class="fab fa-instagram text-lg text-white me-4"></i></a>
              <a href="javascript:;"><i class="fab fa-twitter text-lg text-white me-4"></i></a>
              <a href="javascript:;"><i class="fab fa-google-plus text-lg text-white"></i></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  <!-- -------- END HEADER 7 w/ text and video ------- -->
  <div class="card card-body shadow-xl mx-3 mx-md-4 mt-n6">
    <section class="pt-4 pb-6">
      <div class="container-fluid">
        <div class="row">
          <!-- START Cart item section --><!-- Action is PUT since edit cart item -->


          <div id="ordercontainer" class="item col-lg-8 col-6">
            <div id="orderitem" class="row-lg-12 pb-4 p-3" style="visibility: hidden;">
              <div class="row-lg-12"> <!--service name -->
                <h5 id="service">Interior Cleaning</h5>
                <input id="itemID" type="hidden" value="0">
              </div>
              <div class="row-lg-12"> <!--service details -->
                <div class="row">
                  <div class="col-md-3">
                    <span id="classification" class="text-dark pt-1 mb-0">Full Interior</span>
                  </div>
                  <div class="col-md-3">
                    <span>Car type: </span><br>
                    <span id="type">Crossover</span>
                  </div>
                  <div class="col-lg-1">
                    <div class="input-group input-group-outline">
                      <input id="quantity" class="form-control" type="number" value="1" aria-valuemin="1"
                        aria-valuemax="50">
                    </div>
                  </div>
                  <div class="col-md-4 text-center">
                    <h6 id="price"></h6>
                  </div>
                  <div class="col-1">
                    <a href=""><i class="fas fa-times"></i> </a>
                  </div>
                </div>
              </div>
              <hr style="display:block; background: linear-gradient(to right, white, gray, white);">
            </div>

          </div>

          <!-- END Cart item section -->
          <div class="col-lg-4">
            <div class="card card-frame bg-gray-200">
              <div class="card-body">
                <form> <!-- Action is POST since create new order -->
                  <div class="row pb-4">
                    <h5>Order Summary</h5>
                  </div>
                  <div class="row mb-1">
                    <div class="col-8">
                      <span>Subtotal</span>
                    </div>
                    <div class="col-4 text-end">
                      <span id="subtotal">RM 180</span>
                      <input id="subtotalVal" type="hidden" value="">
                    </div>

                  </div>
                  <hr style="display:block; background: linear-gradient(to right, white, gray, white);">
                  <div class="row">
                    <div class="col-8">
                      <span>Service fee</span>
                    </div>
                    <div class="col-4 text-end">
                      <span id="fee">RM 0</span>
                      <input id="feeVal" type="hidden" value="">
                    </div>
                  </div>
                  <hr style="display:block; background: linear-gradient(to right, white, gray, white);">
                  <div class="row pb-2">
                    <div class="col-8">
                      <h5>Total</h5>
                    </div>
                    <div class="col-4 text-end">
                      <h5 id="total">RM 180</h5>
                      <input id="totalVal" type="hidden" value="">
                    </div>
                  </div>
                  <div class="row">
                    <button type="submit" class="btn bg-gradient-dark w-100">Checkout</button>
                  </div>
                  <div class="row">
                    <button type="submit" class="btn btn-outline-dark w-100 bg-white">Continue Shopping</button>
                  </div>
              </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <script>
        getCart();
        async function getCart() {
          let data = await fetch(
            "http://localhost:8081/order/"
          )
            .then((response) => {
              if (!response.ok) {
                throw new Error(
                  "Network response was not ok"
                );
              }
              return response.json();
            })
            .catch((error) => {
              console.error("Error:", error);
            });
          const originItemElement = document.querySelector('#orderitem')
          console.log(data)
          for (var i in data) {
            const cloneItem = originItemElement.cloneNode(true);
            cloneItem.style.visibility = "visible"
            cloneItem.querySelector('#service').innerText = data[i].service
            cloneItem.querySelector('#classification').innerText = data[i].classification
            cloneItem.querySelector('#type').innerText = data[i].type
            cloneItem.querySelector('#price').innerText = "RM " + data[i].price
            cloneItem.querySelector('#itemID').value = data[i].id;
            document.getElementById('ordercontainer').insertBefore(cloneItem, document.getElementById('ordercontainer').firstChild)

          }

        }

        document.getElementById("quantity").addEventListener("change", async function (event) {
            const updatedValue = parseInt(event.target.value); // Get the new input value
            console.log(typeof updatedValue);
            const data = { 'quantity': updatedValue }; // update quantity
            const id = document.querySelector('#itemID').value
            try {
              const response = await fetch('http://localhost:8081/order/${id}', {
                method: 'PUT',
                headers: {
                  'Content-Type': 'application/json'
                },
                body: JSON.stringify(data) // Send data as JSON
              });

              if (response.ok) {
                const result = await response.json();
                console.log('Update successful:', result);
              } else {
                console.error('Update failed:', response.status);
              }
            } catch (error) {
              console.error('Request error:', error);
            }
            
            
          });
      </script>
    </section>

  </div>
  <footer class="footer pt-5 mt-5">
    <div class="container">
      <div class=" row">
        <div class="col-md-3 mb-4 ms-auto">
          <div>
            <a href="https://www.creative-tim.com/product/material-kit">
              <img src="../assets/img/logo-ct-dark.png" class="mb-3 footer-logo" alt="main_logo">
            </a>
            <h6 class="font-weight-bolder mb-4">Material Kit 2</h6>
          </div>
          <div>
            <ul class="d-flex flex-row ms-n3 nav">
              <li class="nav-item">
                <a class="nav-link pe-1" href="https://www.facebook.com/CreativeTim" target="_blank">
                  <i class="fab fa-facebook text-lg opacity-8"></i>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link pe-1" href="https://twitter.com/creativetim" target="_blank">
                  <i class="fab fa-twitter text-lg opacity-8"></i>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link pe-1" href="https://dribbble.com/creativetim" target="_blank">
                  <i class="fab fa-dribbble text-lg opacity-8"></i>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link pe-1" href="https://github.com/creativetimofficial" target="_blank">
                  <i class="fab fa-github text-lg opacity-8"></i>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link pe-1" href="https://www.youtube.com/channel/UCVyTG4sCw-rOvB9oHkzZD1w"
                  target="_blank">
                  <i class="fab fa-youtube text-lg opacity-8"></i>
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-2 col-sm-6 col-6 mb-4">
          <div>
            <h6 class="text-sm">Company</h6>
            <ul class="flex-column ms-n3 nav">
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/presentation" target="_blank">
                  About Us
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/templates/free" target="_blank">
                  Freebies
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/templates/premium" target="_blank">
                  Premium Tools
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/blog" target="_blank">
                  Blog
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-2 col-sm-6 col-6 mb-4">
          <div>
            <h6 class="text-sm">Resources</h6>
            <ul class="flex-column ms-n3 nav">
              <li class="nav-item">
                <a class="nav-link" href="https://iradesign.io/" target="_blank">
                  Illustrations
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/bits" target="_blank">
                  Bits & Snippets
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/affiliates/new" target="_blank">
                  Affiliate Program
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-2 col-sm-6 col-6 mb-4">
          <div>
            <h6 class="text-sm">Help & Support</h6>
            <ul class="flex-column ms-n3 nav">
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/contact-us" target="_blank">
                  Contact Us
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/knowledge-center" target="_blank">
                  Knowledge Center
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://services.creative-tim.com/?ref=ct-mk2-footer" target="_blank">
                  Custom Development
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/sponsorships" target="_blank">
                  Sponsorships
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-2 col-sm-6 col-6 mb-4 me-auto">
          <div>
            <h6 class="text-sm">Legal</h6>
            <ul class="flex-column ms-n3 nav">
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/knowledge-center/terms-of-service"
                  target="_blank">
                  Terms & Conditions
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/knowledge-center/privacy-policy" target="_blank">
                  Privacy Policy
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.creative-tim.com/license" target="_blank">
                  Licenses (EULA)
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-12">
          <div class="text-center">
            <p class="text-dark my-4 text-sm font-weight-normal">
              All rights reserved. Copyright ©
              <script>
                document.write(new Date().getFullYear())
              </script> Material Kit by <a href="https://www.creative-tim.com" target="_blank">Creative Tim</a>.
            </p>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <!--   Core JS Files   -->
  <script src="../assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="../assets/js/core/bootstrap.min.js" type="text/javascript"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <!--  Plugin for TypedJS, full documentation here: https://github.com/inorganik/CountUp.js -->
  <script src="../assets/js/plugins/countup.min.js"></script>
  <!-- Control Center for Material UI Kit: parallax effects, scripts for the example pages etc -->
  <!--  Google Maps Plugin    -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTTfWur0PDbZWPr7Pmq8K3jiDp0_xUziI"></script>
  <script src="../assets/js/material-kit.min.js?v=3.0.4" type="text/javascript"></script>

  <script>
    if (document.getElementsByClassName('page-header')) {
      window.onscroll = debounce(function () {
        var scrollPosition = window.pageYOffset;
        var bgParallax = document.querySelector('.page-header');
        var oVal = (window.scrollY / 3);
        bgParallax.style.transform = 'translate3d(0,' + oVal + 'px,0)';
      }, 6);
    }
  </script>
</body>

</html>